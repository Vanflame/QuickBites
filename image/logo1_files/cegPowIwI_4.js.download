;/*FB_PKG_DELIM*/

__d("MWV2ProfileWithReaction.react",["fbt","CurrentEnvironment","I64","LSContactBitOffset","MAWPSendOrRemoveReaction.react","MDSListCellPressable.react","MWPActor.react","MWXProfilePhoto.react","MWXText.react","MWXTextPairing.react","ReQL","ReQLSuspense","XCometVanityURLControllerRouteBuilder","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=j||d("react");function a(a){var b=d("react-compiler-runtime").c(44),e=a.actorId,g=a.actualName,j=a.addOnIcon,m=a.isBroadcastThread,n=a.isOneToOne,o=a.isSecure,p=a.message,q=a.onClose,r=a.profilePictureUrl,s=a.reaction,t=d("MAWPSendOrRemoveReaction.react").useSendOrRemoveReaction(p,o,"message_reactions_details_tray");a=(k||(k=d("I64"))).to_string(d("MWPActor.react").useActor());var u=(i||(i=c("useReStore")))();b[0]!==e?(o=(k||(k=d("I64"))).of_string(e),b[0]=e,b[1]=o):o=b[1];var v=o;b[2]!==u.tables.contacts||b[3]!==p.threadKey?(o=function(){return d("ReQL").fromTableAscending(u.tables.contacts).getKeyRange(p.threadKey)},b[2]=u.tables.contacts,b[3]=p.threadKey,b[4]=o):o=b[4];var w;b[5]!==u||b[6]!==p.threadKey?(w=[u,p.threadKey],b[5]=u,b[6]=p.threadKey,b[7]=w):w=b[7];o=d("ReQLSuspense").useFirst(o,w,f.id+":54");w=n&&o!=null?d("LSContactBitOffset").has(66,o):!1;n=n&&o!=null?d("LSContactBitOffset").has(28,o)||d("LSContactBitOffset").has(29,o):!1;o=a===e&&!w&&!n;b[8]!==v||b[9]!==u.tables.contextual_profile_v1||b[10]!==u.tables.threads||b[11]!==p.threadKey?(a=function(){return d("ReQL").fromTableAscending(u.tables.threads).getKeyRange(p.threadKey).map(function(a){a=a.parentThreadKey;a=d("ReQLSuspense").first(d("ReQL").fromTableAscending(u.tables.contextual_profile_v1).getKeyRange(v,a),f.id+":82");return a==null?void 0:a.profileName})},b[8]=v,b[9]=u.tables.contextual_profile_v1,b[10]=u.tables.threads,b[11]=p.threadKey,b[12]=a):a=b[12];b[13]!==v||b[14]!==u||b[15]!==p.threadKey?(w=[v,u,p.threadKey],b[13]=v,b[14]=u,b[15]=p.threadKey,b[16]=w):w=b[16];n=d("ReQLSuspense").useFirst(a,w,f.id+":77");b[17]!==o?(a=o?h._(/*BTDS*/"Click to remove"):h._(/*BTDS*/"Click to view profile"),b[17]=o,b[18]=a):a=b[18];w=a;b[19]!==m||b[20]!==o||b[21]!==p.messageId||b[22]!==q||b[23]!==s||b[24]!==t?(a=o?function(){return t(p.messageId,m?s:void 0,"remove_reaction")}:c("CurrentEnvironment").facebookdotcom?q:void 0,b[19]=m,b[20]=o,b[21]=p.messageId,b[22]=q,b[23]=s,b[24]=t,b[25]=a):a=b[25];q=a;a=c("CurrentEnvironment").facebookdotcom?void 0:"_blank";var x=(c("CurrentEnvironment").facebookdotcom?"":"https://www.facebook.com")+c("XCometVanityURLControllerRouteBuilder").buildUri({vanity:e}).toString(),y;b[26]!==r?(y=l.jsx(c("MWXProfilePhoto.react"),{shape:"circle",size:40,source:{uri:r}}),b[26]=r,b[27]=y):y=b[27];n=(r=n)!=null?r:g;b[28]!==n?(r=l.jsx(c("MWXText.react"),{numberOfLines:1,type:"headline4",children:n}),b[28]=n,b[29]=r):r=b[29];b[30]!==w||b[31]!==r?(g=l.jsx(c("MWXTextPairing.react"),{headline:r,level:4,meta:w}),b[30]=w,b[31]=r,b[32]=g):g=b[32];b[33]!==o||b[34]!==x?(n=o?void 0:{target:a,url:x},b[33]=o,b[34]=x,b[35]=n):n=b[35];w="messenger_reaction_actor_"+e;b[36]!==e||b[37]!==j||b[38]!==q||b[39]!==g||b[40]!==n||b[41]!==w||b[42]!==y?(r=l.jsx(c("MDSListCellPressable.react"),{addOnEnd:j,addOnStart:y,content:g,linkProps:n,onPress:q,size:"medium",testid:void 0},e),b[36]=e,b[37]=j,b[38]=q,b[39]=g,b[40]=n,b[41]=w,b[42]=y,b[43]=r):r=b[43];return r}g["default"]=a}),226);
__d("useReactionsAndContactsGroupedByTypeLS",["MWChatReactionsUtils","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var e=d("react-compiler-runtime").c(11),g=(h||(h=c("useReStore")))(),k;e[0]!==g.tables.contacts||e[1]!==g.tables.reactions||e[2]!==a||e[3]!==b?(k=function(){return d("ReQL").leftJoin(d("ReQL").fromTableAscending(g.tables.reactions).getKeyRange(b,a),d("ReQL").fromTableAscending(g.tables.contacts)).map(j)},e[0]=g.tables.contacts,e[1]=g.tables.reactions,e[2]=a,e[3]=b,e[4]=k):k=e[4];var l;e[5]!==g||e[6]!==a||e[7]!==b?(l=[b,a,g],e[5]=g,e[6]=a,e[7]=b,e[8]=l):l=e[8];k=d("ReQLSuspense").useArray(k,l,f.id+":31");e[9]!==k?(l=k.reduce(i,{}),e[9]=k,e[10]=l):l=e[10];return l}function i(a,b){var c=b[0];b=b[1];b=[[c,b]];var d=a[c.reaction];d=d!=null?d.concat(b):b;a[c.reaction]=d;return a}function j(a){var b=a[0];a=a[1];var c={actorId:b.actorId,authorityLevel:b.authorityLevel,messageId:b.messageId,reaction:d("MWChatReactionsUtils").heartType1,threadKey:b.threadKey,timestampMs:b.timestampMs};return[d("MWChatReactionsUtils").isHeart(b.reaction)?c:b,a]}g["default"]=a}),98);
__d("MWV2ChatReactionsDialog.react",["fbt","EmojiRenderer","I64","LSMessagingThreadTypeUtil","MWChatReactionEmoji","MWLSThread","MWV2ProfileWithReaction.react","MWXColumn.react","MWXColumnItem.react","MWXDialog.react","MWXDialogHeader.react","MWXTabs.react","getLSMediaContactProfilePictureUrl","react","react-compiler-runtime","useIsSecureMessage","useReStore","useReactionsAndContactsGroupedByTypeLS"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=j||(j=d("react")),m=j.useState;function n(a){var b=d("react-compiler-runtime").c(17),e=a.actors,f=a.addOnIcon,g=a.isOneToOne,h=a.isSecure,i=a.message,j=a.onClose,m=a.reaction,n=a.unkownUserName;if(b[0]!==e||b[1]!==f||b[2]!==g||b[3]!==h||b[4]!==i||b[5]!==j||b[6]!==m||b[7]!==n){b[9]!==f||b[10]!==g||b[11]!==h||b[12]!==i||b[13]!==j||b[14]!==m||b[15]!==n?(a=function(a){var b=a[0];a=a[1];b=(k||(k=d("I64"))).to_string(b.actorId);a=a!=null?[a.name,c("getLSMediaContactProfilePictureUrl")(a)]:[n.toString(),"/images/chat/webrtc/no_profile_pic.png"];var e=a[0];a=a[1];return l.jsx(c("MWV2ProfileWithReaction.react"),{actorId:b,actualName:e,addOnIcon:f,isBroadcastThread:!1,isOneToOne:g,isSecure:h,message:i,onClose:j,profilePictureUrl:a,reaction:m},b)},b[9]=f,b[10]=g,b[11]=h,b[12]=i,b[13]=j,b[14]=m,b[15]=n,b[16]=a):a=b[16];a=e.map(a);b[0]=e;b[1]=f;b[2]=g;b[3]=h;b[4]=i;b[5]=j;b[6]=m;b[7]=n;b[8]=a}else a=b[8];return a}function o(a,b){var e=d("EmojiRenderer").parse(b).map(function(a){return a.emoji});if(e.length!==1)return l.jsx("span",{children:b});b=e[0];return l.jsx(c("MWChatReactionEmoji"),{emoji:b,size:a})}o.displayName=o.name+" [from "+f.id+"]";function p(a){var b=d("react-compiler-runtime").c(24),c=a.isOneToOne,e=a.isSecure,f=a.message,g=a.onClose,h=a.reactions,i=a.selectorValue,j=a.unkownUserName;if(i.type==="all"){if(b[0]!==c||b[1]!==e||b[2]!==f||b[3]!==g||b[4]!==h||b[5]!==j){b[7]!==c||b[8]!==e||b[9]!==f||b[10]!==g||b[11]!==j?(a=function(a){var b=a[0];a=a[1];return l.jsx(n,{actors:a,addOnIcon:o(28,b),isOneToOne:c,isSecure:e,message:f,onClose:g,reaction:b,unkownUserName:j},b)},b[7]=c,b[8]=e,b[9]=f,b[10]=g,b[11]=j,b[12]=a):a=b[12];a=Object.entries(h).map(a);b[0]=c;b[1]=e;b[2]=f;b[3]=g;b[4]=h;b[5]=j;b[6]=a}else a=b[6];return a}a=i.currentReaction;b[13]!==a?(i=o(28,a),b[13]=a,b[14]=i):i=b[14];i=i;h=h[a];if(h!=null){var k;b[15]!==h||b[16]!==i||b[17]!==c||b[18]!==e||b[19]!==f||b[20]!==g||b[21]!==a||b[22]!==j?(k=l.jsx(n,{actors:h,addOnIcon:i,isOneToOne:c,isSecure:e,message:f,onClose:g,reaction:a,unkownUserName:j}),b[15]=h,b[16]=i,b[17]=c,b[18]=e,b[19]=f,b[20]=g,b[21]=a,b[22]=j,b[23]=k):k=b[23];return k}return null}var q={content:{minHeight:"xz65tgg",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(39),e=a.message,f=a.onClose;a=a.thread;var g;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g={type:"all"},b[0]=g):g=b[0];g=m(g);var j=g[0],k=g[1];g=a.threadKey;a=e.messageId;var n=d("MWLSThread").useThreadExn(g,u),v=d("MWLSThread").useThreadExn(g,t),w;b[1]!==n?(w=d("LSMessagingThreadTypeUtil").isOneToOne(n),b[1]=n,b[2]=w):w=b[2];w=w;var x;b[3]!==v?(x=d("LSMessagingThreadTypeUtil").isWorkThread(v),b[3]=v,b[4]=x):x=b[4];v=x;b[5]!==v?(x=v?h._(/*BTDS*/"Workplace user"):h._(/*BTDS*/"Facebook user"),b[5]=v,b[6]=x):x=b[6];v=x;x=(i||(i=c("useReStore")))();var y;b[7]!==n?(y=d("LSMessagingThreadTypeUtil").isArmadilloSecure(n),b[7]=n,b[8]=y):y=b[8];b[9]!==y?(n={fallbackIsSecure:y},b[9]=y,b[10]=n):n=b[10];y=c("useIsSecureMessage")(x,e,n);x=c("useReactionsAndContactsGroupedByTypeLS")(a,g);b[11]!==x?(n=Object.values(x).reduce(s,0),b[11]=x,b[12]=n):n=b[12];a=n;var z;if(b[13]!==a||b[14]!==x||b[15]!==j.currentReaction||b[16]!==j.type){b[18]===Symbol["for"]("react.memo_cache_sentinel")?(g=function(){return k({type:"all"})},b[18]=g):g=b[18];z=[{label:h._(/*BTDS*/"All {total reactions}",[h._param("total reactions",String(a))]),onPress:g,selected:j.type==="all"}];Object.entries(x).sort(r).forEach(function(a){var b=a[0];a=a[1];a=l.jsxs("div",{children:[o(20,b),l.jsx("span",babelHelpers["extends"]({className:"x1t2a60a"},{children:a.length}))]});z.push({label:a,onPress:function(a){return k({currentReaction:b,type:"reaction"})},selected:j.currentReaction===b&&j.type==="reaction"})});b[13]=a;b[14]=x;b[15]=j.currentReaction;b[16]=j.type;b[17]=z}else z=b[17];b[19]===Symbol["for"]("react.memo_cache_sentinel")?(n=h._(/*BTDS*/"Message reactions"),b[19]=n):n=b[19];b[20]!==f?(g=l.jsx(c("MWXDialogHeader.react"),{onClose:f,title:n,withCloseButton:!0}),b[20]=f,b[21]=g):g=b[21];b[22]!==z?(a=l.jsx(c("MWXColumnItem.react"),{children:l.jsx(c("MWXTabs.react"),{tabs:z})}),b[22]=z,b[23]=a):a=b[23];b[24]!==x||b[25]!==w||b[26]!==y||b[27]!==e||b[28]!==f||b[29]!==j||b[30]!==v?(n=l.jsx(c("MWXColumnItem.react"),{children:l.jsx(p,{isOneToOne:w,isSecure:y,message:e,onClose:f,reactions:x,selectorValue:j,unkownUserName:v})}),b[24]=x,b[25]=w,b[26]=y,b[27]=e,b[28]=f,b[29]=j,b[30]=v,b[31]=n):n=b[31];b[32]!==a||b[33]!==n?(x=l.jsxs(c("MWXColumn.react"),{spacing:12,xstyle:q.content,children:[a,n]}),b[32]=a,b[33]=n,b[34]=x):x=b[34];b[35]!==f||b[36]!==x||b[37]!==g?(w=l.jsx(c("MWXDialog.react"),{footer:null,header:g,onClose:f,children:x}),b[35]=f,b[36]=x,b[37]=g,b[38]=w):w=b[38];return w}function r(a,b){a=a[1];b=b[1];a=a.length;b=b.length;return b-a}function s(a,b){return a+b.length}function t(a){return a.threadSubtype}function u(a){return a.threadType}g["default"]=a}),226);