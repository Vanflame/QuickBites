;/*FB_PKG_DELIM*/

__d("CometHero.react",["hero-tracing-placeholder"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=d("hero-tracing-placeholder").HeroComponent}),98);
__d("FDSVideoFilled12Icon",["cr:15854"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:15854")}),98);
__d("CometMediaViewerFilmstrip.react",["fbt","CometBackgroundImage.react","CometImage.react","CometPressable.react","CometThrottle","FDSIcon.react","FDSVideoFilled12Icon","Locale","MWMediaGalleryVideoThumbnail.react","MWVideoPlayerPlayButton.react","gkx","react","react-compiler-runtime","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));b=j;b.useCallback;var l=b.useEffect,m=b.useRef,n=b.useState,o=c("gkx")("1775"),p={imageInner:{height:"x5yr21d",objectFit:"x19kjcj4",overflowX:"x6ikm8r",overflowY:"x10wlt62",width:"xh8yej3",$$css:!0},maxRootWidth:{maxWidth:"x193iq5w",$$css:!0},root:{alignItems:"x6s0dn4",display:"x78zum5",paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2",transitionDuration:"xu6gjpd",transitionProperty:"x11xpdln",transitionTimingFunction:"x1r7x56h",whiteSpace:"xuxw1ft",$$css:!0},rootOverflow:{overflowX:"xw2csxc",overflowY:"x10wlt62",overscrollBehavior:"xish69e",$$css:!0},thumbnail:{borderTopStartRadius:"xhk9q7s",borderTopEndRadius:"x1otrzb0",borderBottomEndRadius:"x1i1ezom",borderBottomStartRadius:"x1o6z2jb",cursor:"x1ypdohk",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},thumbnailContainer:{display:"x1rg5ohu",flexShrink:"x2lah0s",$$css:!0},thumbnailFocusRing:{borderTopStartRadius:"xhk9q7s",borderTopEndRadius:"x1otrzb0",borderBottomEndRadius:"x1i1ezom",borderBottomStartRadius:"x1o6z2jb",$$css:!0},thumbnailNonActive:{opacity:"xti2d7y",":hover_opacity":"x5z6fxw",$$css:!0},thumbnailNonActiveDarken:{filter:"x1vra34",":hover_filter":"x19oicha",$$css:!0}},q={2:{marginStart:"x12mruv9",marginEnd:"xfs2ol5",marginLeft:null,marginRight:null,$$css:!0},6:{marginStart:"x1mnrxsn",marginEnd:"x1w0mnb",marginLeft:null,marginRight:null,$$css:!0}},r={36:{width:"x14qfxbe",$$css:!0},40:{width:"x100vrsf",$$css:!0}},s={36:{height:"xc9qbxq",$$css:!0},40:{height:"x1vqgdyp",$$css:!0}};function t(a){var b=d("react-compiler-runtime").c(40),e;b[0]!==a.image.backgroundColor||b[1]!==a.image.isUseImageResizing||b[2]!==a.image.mediaType?(e=a.image.mediaType!=="video"&&Boolean(a.image.isUseImageResizing)?{backgroundColor:a.image.backgroundColor}:{},b[0]=a.image.backgroundColor,b[1]=a.image.isUseImageResizing,b[2]=a.image.mediaType,b[3]=e):e=b[3];e=e;var f=a.image.mediaType!=="video"?a.image.uri:a.image.thumbnailUri,g=a.thumbnailMargin,j=a.thumbnailSize,n=a.thumbnailUseDarken;n=n?p.thumbnailNonActiveDarken:p.thumbnailNonActive;var t="comet-media-viewer-filmstrip-thubmnail-"+a.index,u=m(null),v;b[4]!==a.active||b[5]!==a.canScrollToActiveThumbnail?(v=function(){if(a.active&&a.canScrollToActiveThumbnail&&o){var b;(b=u.current)==null?void 0:b.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}},b[4]=a.active,b[5]=a.canScrollToActiveThumbnail,b[6]=v):v=b[6];var w=v,x;b[7]!==w?(v=function(){w()},x=[w],b[7]=w,b[8]=v,b[9]=x):(v=b[8],x=b[9]);l(v,x);b[10]!==w?(v=function(){if(!o)return;var a=c("CometThrottle")(w,100);window.addEventListener("resize",a);return function(){window.removeEventListener("resize",a)}},x=[w],b[10]=w,b[11]=v,b[12]=x):(v=b[11],x=b[12]);l(v,x);b[13]!==g||b[14]!==j?(v=(i||(i=c("stylex"))).props([p.thumbnailContainer,s[j],r[j],q[g]]),b[13]=g,b[14]=j,b[15]=v):v=b[15];b[16]!==a.index?(x=h._(/*BTDS*/"Thumbnail {index}",[h._param("index",a.index)]),b[16]=a.index,b[17]=x):x=b[17];g=a.onClick;var y=s[j];j=r[j];n=a.active!==!0&&n;var z;b[18]!==j||b[19]!==n||b[20]!==y?(z=(i||(i=c("stylex")))(p.thumbnail,y,j,n),b[18]=j,b[19]=n,b[20]=y,b[21]=z):z=b[21];b[22]!==f||b[23]!==a.alt||b[24]!==a.image.isUseImageResizing||b[25]!==a.image.mediaType||b[26]!==a.image.uri?(j=a.image.mediaType==="video"?k.jsxs(k.Fragment,{children:[c("gkx")("8622")===!0?k.jsx("div",babelHelpers["extends"]({className:"x6s0dn4 x78zum5 x3igimt xl56j7k x10l6tqk x1qrby5j"},{children:k.jsx(c("MWVideoPlayerPlayButton.react"),{isVisible:!0,size:"SMALL"})})):k.jsx("div",babelHelpers["extends"]({className:"x6s0dn4 x78zum5 x3igimt xl56j7k x10l6tqk x1qrby5j"},{children:k.jsx(c("FDSIcon.react"),{color:"white",icon:c("FDSVideoFilled12Icon")})})),k.jsx(c("MWMediaGalleryVideoThumbnail.react"),{fallbackVideoUrl:a.image.uri,previewUrl:f})]}):Boolean(a.image.isUseImageResizing)?k.jsx(c("CometImage.react"),{src:f,xstyle:p.imageInner}):k.jsx(c("CometBackgroundImage.react"),{alt:a.alt,src:f}),b[22]=f,b[23]=a.alt,b[24]=a.image.isUseImageResizing,b[25]=a.image.mediaType,b[26]=a.image.uri,b[27]=j):j=b[27];b[28]!==e||b[29]!==z||b[30]!==j?(n=k.jsx("div",{className:z,style:e,children:j}),b[28]=e,b[29]=z,b[30]=j,b[31]=n):n=b[31];b[32]!==a.onClick||b[33]!==n||b[34]!==x?(y=k.jsx(c("CometPressable.react"),{display:"block",label:x,onPress:g,overlayDisabled:!0,xstyle:p.thumbnailFocusRing,children:n}),b[32]=a.onClick,b[33]=n,b[34]=x,b[35]=y):y=b[35];b[36]!==y||b[37]!==v||b[38]!==t?(f=k.jsx("div",babelHelpers["extends"]({},v,{"data-testid":void 0,ref:u,children:y})),b[36]=y,b[37]=v,b[38]=t,b[39]=f):f=b[39];return f}function a(a){var b=d("react-compiler-runtime").c(26),e=n(0),f=e[0],g=e[1],h=m(null),j=m(null),q=m(null);e=n(!1);var r=e[0],u=e[1];e=a.thumbnailMargin;var v=a.thumbnailSize,w=a.thumbnailUseDarken,x=e===void 0?6:e,y=v===void 0?36:v,z=w===void 0?!1:w,A=y+x*2;b[0]!==a.activeIndex||b[1]!==a.images.length||b[2]!==A||b[3]!==f?(e=function(){var b=function(){if(h.current!=null){var b=h.current,c=b.offsetWidth;b=b.scrollWidth;var d=q.current;if(b===c)return;b=-f/A;var e=Math.floor((c+-f)/A),i=b+Math.floor((e-b)/2);if(d!=null){if(a.activeIndex>d&&(a.activeIndex<i||e===a.images.length)){q.current=a.activeIndex;return}if(a.activeIndex<d&&(a.activeIndex>i||b===0)){q.current=a.activeIndex;return}}i=f-(a.activeIndex-((e=d)!=null?e:0))*A;i=Math.min(0,i);i=Math.max(Math.floor(c-a.images.length*A),i);q.current=a.activeIndex;g(i)}};if(o)return;b();j.current!=null&&window.removeEventListener("resize",j.current);b=c("CometThrottle")(b,100);j.current=b;window.addEventListener("resize",b);return function(){j.current!=null&&window.removeEventListener("resize",j.current)}},b[0]=a.activeIndex,b[1]=a.images.length,b[2]=A,b[3]=f,b[4]=e):e=b[4];b[5]!==a.activeIndex||b[6]!==a.images||b[7]!==A||b[8]!==f?(v=[a.images,a.activeIndex,f,A],b[5]=a.activeIndex,b[6]=a.images,b[7]=A,b[8]=f,b[9]=v):v=b[9];l(e,v);b[10]===Symbol["for"]("react.memo_cache_sentinel")?(w=function(){u(!0)},e=[],b[10]=w,b[11]=e):(w=b[10],e=b[11]);l(w,e);if(a.images.length<2)return null;v=s[y];b[12]!==v?(w=(i||(i=c("stylex")))([p.root,v,o?p.rootOverflow:p.maxRootWidth]),b[12]=v,b[13]=w):w=b[13];b[14]!==f?(e=o?void 0:{transform:"translate3d("+(d("Locale").isRTL()?-f:f)+"px, 0, 0)"},b[14]=f,b[15]=e):e=b[15];b[16]!==r||b[17]!==a||b[18]!==x||b[19]!==y||b[20]!==z?(v=a.images.map(function(b,c){return k.jsx(t,{active:a.activeIndex===c,alt:b.alt,canScrollToActiveThumbnail:r,image:b,index:c,onClick:function(b){a.onSetImage(c)},thumbnailMargin:x,thumbnailSize:y,thumbnailUseDarken:z},"thumbnail_"+c)}),b[16]=r,b[17]=a,b[18]=x,b[19]=y,b[20]=z,b[21]=v):v=b[21];var B;b[22]!==v||b[23]!==w||b[24]!==e?(B=k.jsx("div",{className:w,ref:h,style:e,children:v}),b[22]=v,b[23]=w,b[24]=e,b[25]=B):B=b[25];return B}g["default"]=a}),226);
__d("FDSPhotoDownloadFilled16Icon",["cr:15408"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:15408")}),98);
__d("FDSPhotoDownloadFilled16PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("1873235"),16);b=a;g["default"]=b}),98);
__d("FDSVideoFilled12PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("507224"),12);b=a;g["default"]=b}),98);
__d("MDSShareSvgIcon.react",["MDSSvgIcon.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(4),e,f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx("path",{d:"M18.766 4.857a1 1 0 00-1.532 0L13.878 8.86a1 1 0 00.766 1.643H16.5a.25.25 0 01.25.25v10.75a1 1 0 001 1h.5a1 1 0 001-1v-10.75a.25.25 0 01.25-.25h1.856a1 1 0 00.766-1.643l-3.356-4.002z"}),f=i.jsx("path",{d:"M14.75 13.502a1 1 0 00-1-1H12.5a4 4 0 00-4 4v8.5a4 4 0 004 4h11a4 4 0 004-4v-8.5a4 4 0 00-4-4h-1.25a1 1 0 00-1 1v.5a1 1 0 001 1h1.25a1.5 1.5 0 011.5 1.5v8.5a1.5 1.5 0 01-1.5 1.5h-11a1.5 1.5 0 01-1.5-1.5v-8.5a1.5 1.5 0 011.5-1.5h1.25a1 1 0 001-1v-.5z"}),b[0]=e,b[1]=f):(e=b[0],f=b[1]);b[2]!==a?(e=i.jsxs(c("MDSSvgIcon.react"),babelHelpers["extends"]({},a,{children:[e,f]})),b[2]=a,b[3]=e):e=b[3];return e}g["default"]=a}),98);
__d("useMAWBulkMaybeAutoTriggerDownload",["MAWDownloadMediaInWorkerDeferred","MAWMediaDownloadStatus","MAWStateContext.react","gkx","justknobx","react","react-compiler-runtime","useAsyncReStore","useMAWBulkMediaDownloadStatus"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useContext,j=b.useEffect;b.useMemo;var k=b.useRef;function a(a,b,e){var f=d("react-compiler-runtime").c(11),g=c("useMAWBulkMediaDownloadStatus")(a),h;f[0]!==g?(h=new Map(g.map(l)),f[0]=g,f[1]=h):h=f[1];g=h;var m=g;f[2]===Symbol["for"]("react.memo_cache_sentinel")?(h=new Map(),f[2]=h):h=f[2];var n=k(h),o=c("useAsyncReStore")(),p=i(d("MAWStateContext.react").MAWDispatchContext);f[3]!==a||f[4]!==o||f[5]!==p||f[6]!==e||f[7]!==m||f[8]!==b?(g=function(){var f=[];a.forEach(function(a){var g,h,i=a.attachment;a=a.mediaRenderQpl;g=(g=m.get(i.attachmentFbid))!=null?g:!1;h=(h=n.current.get(i.attachmentFbid))!=null?h:!1;g&&!h&&(n.current.set(i.attachmentFbid,!0),!c("justknobx")._("3226")?d("MAWDownloadMediaInWorkerDeferred").maybeDownloadMediaInWorker({attachment:i,dbPromise:o,dispatch:p,downloadType:e,mediaRenderQpl:a,triggerUIView:b}):f.push({attachment:i,mediaRenderQpl:a}))});f.length>0&&d("MAWDownloadMediaInWorkerDeferred").maybeBulkDownloadMediaInWorker({attachmentsWithQpl:f,dbPromise:o,dispatch:p,downloadType:e,triggerUIView:b})},h=[a,o,p,e,n,m,b],f[3]=a,f[4]=o,f[5]=p,f[6]=e,f[7]=m,f[8]=b,f[9]=g,f[10]=h):(g=f[9],h=f[10]);j(g,h)}function l(a){var b;b=(a==null?void 0:(b=a.status)==null?void 0:b.mainMediaStatus)===c("MAWMediaDownloadStatus").MISSING_FILE||(a==null?void 0:(b=a.status)==null?void 0:b.mainMediaStatus)===c("MAWMediaDownloadStatus").MANUAL_RETRYABLE_FAILURE||c("gkx")("5850")&&(a==null?void 0:(b=a.status)==null?void 0:b.mainMediaStatus)===c("MAWMediaDownloadStatus").DOWNLOADING;return[a.attachment.attachmentFbid,b]}g["default"]=a}),98);
__d("MWChatAttachmentMediaState.react",["$InternalEnum","I64","LSIntEnum","MAWClientMediaStatusUtils","MAWMediaManagerUiIntegrationCheck","MAWVideoAudioPlaybackErrorHandlerUtils","MessagingAttachmentType","RavenMessagingState","ReQL","ReQLSuspense","cr:17327","cr:17328","filterNulls","react","react-compiler-runtime","useEmptyFunction","useMAWBulkMaybeAutoTriggerDownload","usePrevious","useReStore","vulture"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react"));e=i;var m=e.createContext;e.useCallback;var n=e.useEffect,o=e.useMemo,p=e.useState,q=(e=b("cr:17327"))!=null?e:c("useEmptyFunction"),r=(e=b("cr:17328"))!=null?e:c("useEmptyFunction"),s=b("$InternalEnum")({Image:0,Video:1}),t=m({canMoveBackward:!1,canMoveForward:!1,card:void 0,cards:[],currentIndex:0,moveBackward:function(){},moveForward:function(){},moveTo:function(){},numberOfCards:0,shouldTriggerLoadMore:!1});function u(a){var b=a.attachmentType;a=a.ephemeralMediaState;return a!=null&&(j||(j=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_IMAGE))&&(j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("RavenMessagingState").PERMANENT))}function v(a){var b=a.attachmentType;a=a.ephemeralMediaState;return a!=null&&(j||(j=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_VIDEO))&&(j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("RavenMessagingState").PERMANENT))}function w(a,b,c,d){return c?d.hasMedia:b(d,"isPlayableMedia")!=null&&a(d,"isPlayableMedia")!=null}function x(a,b,e,f){var g=f.attachmentType;return!w(a,b,e,f)?!1:u(f)||(j||(j=d("I64"))).equal(g,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))}function y(a,b,e,f,g,h){var i=f.attachmentFbid,l=f.attachmentType,m=!1,n=!1;if(d("MAWVideoAudioPlaybackErrorHandlerUtils").isVideoFallbackExperiencesEnabled({silent:!1})){h=d("MAWClientMediaStatusUtils").getStatusDataFromLsdbOrContext({clientMediaStatus:h,mediaDownloadStatusState:g,statusKey:i});g=h.hasStatus;i=h.statusData;if(g){g=(h=i)!=null?h:{};i=g.validationResult;m=i!=null?d("MAWVideoAudioPlaybackErrorHandlerUtils").isInvalidVideo(f,i):!1;n=i!=null?d("MAWVideoAudioPlaybackErrorHandlerUtils").isUnsupportedVideo(f,i):!1}}return!w(a,b,e,f)||m||n?!1:v(f)||(j||(j=d("I64"))).equal(l,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))}function z(a,b){n(function(){a.forEach(function(a){try{a.attachment.hasMedia&&b(a.attachment,"usePreloadThumbnails");return}catch(a){return}})},[a,b])}function A(a){var b=a.attachments,e=a.children,f=a.getIsSecureThread,g=a.getPlayableUrl,h=a.getPreviewUrl;a=a.initialAttachment;a=p(a);var i=a[0],j=a[1];a=c("usePrevious")(i==null?void 0:i.messageId);var k=q(),m=o(function(){return b.map(function(a){return{attachment:a,mediaRenderQpl:null,statusKey:a.attachmentFbid}})},[b]),n=r(m),u=o(function(){return i!=null&&d("MAWMediaManagerUiIntegrationCheck").getIsMediaManagerUiIntegrationEnabled()?{attachment:i,mediaRenderQpl:null,statusKey:i.attachmentFbid}:null},[i]);c("useMAWBulkMaybeAutoTriggerDownload")(m,"fullsize","preview");c("useMAWBulkMaybeAutoTriggerDownload")(u!=null?[u]:[],"fullsize","fullsizeAndPreview");var v=o(function(){return c("filterNulls")(b.map(function(a){var b=f(a);if(x(g,h,b,a))return{attachment:a,type:s.Image};return y(g,h,b,a,k,n)?{attachment:a,type:s.Video}:null}))},[b,n,f,g,h,k]),w=i==null?-1:v.findIndex(function(a){return a.attachment.attachmentFbid===i.attachmentFbid&&a.attachment.messageId===i.messageId}),A=a!=null&&(i==null?void 0:i.messageId)!==a&&w>v.length-5;z(v,h);m=o(function(){var a=Math.max(0,v.length-1);return{canMoveBackward:w>0&&w!==-1,canMoveForward:w<a&&w!==-1,card:v[w],cards:v,currentIndex:w,moveBackward:function(){var a=Math.max(w-1,0);j((a=v[a])==null?void 0:a.attachment)},moveForward:function(){var b=Math.min(w+1,a);j((b=v[b])==null?void 0:b.attachment)},moveTo:function(a){j(a.attachment)},numberOfCards:v.length,shouldTriggerLoadMore:A}},[v,w,A]);return l.jsx(t.Provider,{value:m,children:e})}A.displayName=A.name+" [from "+f.id+"]";function a(a){var b=d("react-compiler-runtime").c(28),e=a.attachmentFbid,g=a.children,i=a.getPlayableUrl,j=a.getPreviewUrl,k=a.isSecureThread,m=a.threadKey;c("vulture")("SQUu5DBRrDsh1pluf1mTgMML8vU=");var n=q(),o=(h||(h=c("useReStore")))();b[0]!==e||b[1]!==o.tables.attachments||b[2]!==m?(a=function(){return d("ReQL").fromTableAscending(o.tables.attachments).getKeyRange(m).filter(function(a){return a.attachmentFbid===e})},b[0]=e,b[1]=o.tables.attachments,b[2]=m,b[3]=a):a=b[3];var p;b[4]!==e||b[5]!==o||b[6]!==m?(p=[o,m,e],b[4]=e,b[5]=o,b[6]=m,b[7]=p):p=b[7];a=d("ReQLSuspense").useFirst(a,p,f.id+":378");var r;b[8]!==o.tables.attachments||b[9]!==o.tables.client_media_status||b[10]!==i||b[11]!==j||b[12]!==k||b[13]!==n||b[14]!==m?(p=function(){return d("ReQL").fromTableAscending(o.tables.attachments).getKeyRange(m).filter(function(a){var b=n==null?d("ReQLSuspense").toArray(d("ReQL").fromTableAscending(o.tables.client_media_status).getKeyRange(a.attachmentFbid),f.id+":393"):void 0;return x(i,j,k,a)||y(i,j,k,a,n,b)})},r=[o.tables.attachments,o.tables.client_media_status,m,n,i,j,k],b[8]=o.tables.attachments,b[9]=o.tables.client_media_status,b[10]=i,b[11]=j,b[12]=k,b[13]=n,b[14]=m,b[15]=p,b[16]=r):(p=b[15],r=b[16]);p=d("ReQLSuspense").useArray(p,r,f.id+":386");b[17]!==p?(r=[].concat(p).sort(B),b[17]=p,b[18]=r):r=b[18];p=r;r=p;b[19]!==k?(p=function(){return k},b[19]=k,b[20]=p):p=b[20];p=p;var s;b[21]!==a||b[22]!==g||b[23]!==p||b[24]!==i||b[25]!==j||b[26]!==r?(s=l.jsx(A,{attachments:r,getIsSecureThread:p,getPlayableUrl:i,getPreviewUrl:j,initialAttachment:a,children:g}),b[21]=a,b[22]=g,b[23]=p,b[24]=i,b[25]=j,b[26]=r,b[27]=s):s=b[27];return s}function B(a,b){return(j||(j=d("I64"))).compare(b.timestampMs,a.timestampMs)}g.AttachmentMediaType=s;g.context=t;g.MWChatAttachmentMediaStateProviderFromAttachments=A;g.MWChatAttachmentMediaStateProvider=a}),98);
__d("MWChatAttachmentMediaNavigationHotkeys.react",["fbt","CometKeys","MWChatAttachmentMediaState.react","justknobx","react","react-compiler-runtime","useLayerKeyCommands"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useContext;b.useMemo;var l={key:c("CometKeys").LEFT},m={key:c("CometKeys").RIGHT},n={key:c("CometKeys").ESCAPE},o=h._(/*BTDS*/"Next item"),p=h._(/*BTDS*/"Previous item"),q=h._(/*BTDS*/"Close");function a(a){var b=d("react-compiler-runtime").c(12),e=a.children;a=a.onClose;var f=k(d("MWChatAttachmentMediaState.react").context),g=f.moveBackward;f=f.moveForward;var h;b[0]!==g?(h={command:l,description:o,handler:g},b[0]=g,b[1]=h):h=b[1];b[2]!==f?(g={command:m,description:p,handler:f},b[2]=f,b[3]=g):g=b[3];b[4]!==a?(f=a!=null?{command:n,description:q,handler:a}:null,b[4]=a,b[5]=f):f=b[5];b[6]!==h||b[7]!==g||b[8]!==f?(a=[h,g,f].filter(Boolean),b[6]=h,b[7]=g,b[8]=f,b[9]=a):a=b[9];h=a;g=h;c("useLayerKeyCommands")(g);if(b[10]!==e){h=c("justknobx")._("3491")?j.jsx(j.Fragment,{children:(f=e)!=null?f:null}):j.jsx("div",{children:(a=e)!=null?a:null});b[10]=e;b[11]=h}else h=b[11];return h}g.keyLeft=l;g.keyRight=m;g.keyEscape=n;g.MWChatAttachmentMediaNavigationHotkeys=a}),226);
__d("MWV2MediaViewerContext.react",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useMemo;var j=i.createContext({getDownloadUrl:function(){},getPlayableUrl:function(){},getPreviewUrl:function(){},heroLoggingComponent:function(a){return null},loadMore:function(){},media:[]});function a(a){var b=d("react-compiler-runtime").c(10),c=a.children,e=a.getDownloadUrl,f=a.getPlayableUrl,g=a.getPreviewUrl,h=a.heroLoggingComponent,k=a.loadMore;a=a.media;var l;b[0]!==e||b[1]!==f||b[2]!==g||b[3]!==h||b[4]!==k||b[5]!==a?(l={getDownloadUrl:e,getPlayableUrl:f,getPreviewUrl:g,heroLoggingComponent:h,loadMore:k,media:a},b[0]=e,b[1]=f,b[2]=g,b[3]=h,b[4]=k,b[5]=a,b[6]=l):l=b[6];e=l;f=e;b[7]!==c||b[8]!==f?(g=i.jsx(j.Provider,{value:f,children:c}),b[7]=c,b[8]=f,b[9]=g):g=b[9];return g}g.context=j;g.MWV2MediaViewerContextProvider=a}),98);
__d("MWChatAttachmentMediaThumbnails.react",["CometMediaViewerFilmstrip.react","CometPlaceholder.react","MWChatAttachmentMediaState.react","MWV2MediaViewerContext.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useContext,k=b.useDeferredValue;function l(a){var b=a.card,c=a.getPlayableUrl;a=a.getPreviewUrl;var e=b.attachment,f,g="/images/comet/gray.png";if(e.hasMedia===!1)f=g;else{f=(a=a(e,"toFilmstripThumbnail"))!=null?a:g}a=f;b.type===d("MWChatAttachmentMediaState.react").AttachmentMediaType.Video&&!Boolean(f)&&(a=c(e,"toFilmstripThumbnail"));if(b.type===d("MWChatAttachmentMediaState.react").AttachmentMediaType.Image){return{alt:(g=e.accessibilitySummaryText)!=null?g:"",backgroundColor:void 0,height:0,isUseImageResizing:void 0,mediaType:"image",uri:f,width:0}}return{height:0,mediaType:"video",thumbnailUri:f,uri:a,width:0}}function m(a){var b,e=d("react-compiler-runtime").c(23),f=a.activeCard,g=a.cards,h=a.getPreviewUrl,k=a.onSetImage,m=j(d("MWV2MediaViewerContext.react").context);e[0]!==m?(a=function(a,b){return a==null?"":(a=m.getDownloadUrl(a,b))!=null?a:""},e[0]=m,e[1]=a):a=e[1];var n=a;if(e[2]!==g||e[3]!==n||e[4]!==h){e[6]!==n||e[7]!==h?(a=function(a){return l({card:a,getPlayableUrl:n,getPreviewUrl:h})},e[6]=n,e[7]=h,e[8]=a):a=e[8];a=g.map(a);e[2]=g;e[3]=n;e[4]=h;e[5]=a}else a=e[5];a=a;if(e[9]!==(f==null?void 0:(b=f.attachment)==null?void 0:b.attachmentFbid)||e[10]!==(f==null?void 0:(b=f.attachment)==null?void 0:b.messageId)||e[11]!==g){if(e[13]!==(f==null?void 0:(b=f.attachment)==null?void 0:b.attachmentFbid)||e[14]!==(f==null?void 0:(b=f.attachment)==null?void 0:b.messageId)){var o;b=function(a){var b;return a.attachment.attachmentFbid===(f==null?void 0:(b=f.attachment)==null?void 0:b.attachmentFbid)&&a.attachment.messageId===(f==null?void 0:(b=f.attachment)==null?void 0:b.messageId)};e[13]=f==null?void 0:(o=f.attachment)==null?void 0:o.attachmentFbid;e[14]=f==null?void 0:(o=f.attachment)==null?void 0:o.messageId;e[15]=b}else b=e[15];o=g.findIndex(b);e[9]=f==null?void 0:(b=f.attachment)==null?void 0:b.attachmentFbid;e[10]=f==null?void 0:(b=f.attachment)==null?void 0:b.messageId;e[11]=g;e[12]=o}else o=e[12];b=o;e[16]!==g||e[17]!==k?(o=function(a){return k(g[a])},e[16]=g,e[17]=k,e[18]=o):o=e[18];var p;e[19]!==b||e[20]!==a||e[21]!==o?(p=i.jsx(c("CometMediaViewerFilmstrip.react"),{activeIndex:b,images:a,onSetImage:o}),e[19]=b,e[20]=a,e[21]=o,e[22]=p):p=e[22];return p}function a(a){var b=d("react-compiler-runtime").c(6);a=a.getPreviewUrl;var e=j(d("MWChatAttachmentMediaState.react").context),f=e.card,g=e.cards;e=e.moveTo;g=k(g);var h;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(h={className:"xdj266r xkrivgy xat24cr x1gryazu x193iq5w x6ikm8r x10wlt62"},b[0]=h):h=b[0];b[1]!==f||b[2]!==g||b[3]!==a||b[4]!==e?(h=i.jsx("div",babelHelpers["extends"]({},h,{children:i.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWChatAttachmentMediaThumbnails",children:i.jsx(m,{activeCard:f,cards:g,getPreviewUrl:a,onSetImage:e})})})),b[1]=f,b[2]=g,b[3]=a,b[4]=e,b[5]=h):h=b[5];return h}g["default"]=a}),98);
__d("MWChatForwardCircleButton.react",["fbt","FDSCircleButton.react","MDSShareSvgIcon.react","ODS","SVGIcon","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||d("react");function a(a){var b=d("react-compiler-runtime").c(9),e=a.color,f=a.onOpenForwardDialog;a=a.type;var g;b[0]!==e?(g=d("SVGIcon").legacySVGIcon(function(){return k.jsx(c("MDSShareSvgIcon.react"),{color:e,size:24})}),b[0]=e,b[1]=g):g=b[1];var i;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(i=h._(/*BTDS*/"Forward"),b[2]=i):i=b[2];var l;b[3]!==f?(l=function(){(j||(j=d("ODS"))).bumpEntityKey(3185,"mwchat_media_viewer","forward"),f()},b[3]=f,b[4]=l):l=b[4];bb0:{switch(a){case"deemphasized":a="deemphasized";break bb0;case"normal":a="normal";break bb0;case"overlay":a="overlay";break bb0;case"dark_overlay":a="dark-overlay";break bb0;case"deemphasized_overlay":case"overlay_raised":a="overlay-raised";break bb0;case"primary_background_overlay":a="primary-background-overlay";break bb0}a=void 0}b[5]!==g||b[6]!==l||b[7]!==a?(i=k.jsx(c("FDSCircleButton.react"),{icon:g,label:i,onPress:l,size:36,testid:void 0,type_DEPRECATED:a}),b[5]=g,b[6]=l,b[7]=a,b[8]=i):i=b[8];return i}g["default"]=a}),226);
__d("MWChatMediaViewerNavigationTapTarget.react",["CometTrackingNodeProvider.react","Locale","MWXIconChevronLeft","MWXIconChevronRight","MWXIconStrict.react","MWXPressable.react","react","react-compiler-runtime","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k=d("Locale").isRTL(),l={buttonContainerBackground:{backgroundColor:"xiwuv7k",$$css:!0},buttonContainerHoverLeft:{opacity:"x1hc1fzr",transform:"xs51lif",$$css:!0},buttonContainerHoverRight:{opacity:"x1hc1fzr",transform:"xzycz3q",$$css:!0},navButton:{alignItems:"x6s0dn4",display:"x78zum5",opacity:"x197sbye",paddingTop:"xyamay9",paddingEnd:"x1pi30zi",paddingBottom:"x1l90r2v",paddingStart:"x1swvt13",position:"x1n2onr6",transitionDuration:"x1k90msu",transitionProperty:"x6o7n8i",transitionTimingFunction:"x9lcvmn",willChange:"x6my1t9",$$css:!0},tapTargetOverlay:{height:"x5yr21d",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(15),e=a.direction,f=a.invisible,g=a.label,i=a.onClick,m=a.testid;a=a.trackingNode;f=f===void 0?!1:f;var n=k?c("MWXIconChevronRight"):c("MWXIconChevronLeft"),o=k?c("MWXIconChevronLeft"):c("MWXIconChevronRight"),p;b[0]!==e?(p=function(a){a=a.hovered;return j.jsx("div",babelHelpers["extends"]({},(h||(h=c("stylex"))).props(l.navButton,l.buttonContainerBackground,a&&(e==="previous"?l.buttonContainerHoverLeft:l.buttonContainerHoverRight)),{children:j.jsx("div",babelHelpers["extends"]({className:"x6s0dn4 x1l31dnx x14yjl9h xudhj91 x18nykt9 xww2gxu x1qeybcx x78zum5 x1vqgdyp xl56j7k x100vrsf"},{children:j.jsx(c("MWXIconStrict.react"),{icon:e==="previous"?n:o,size:20})}))}))},b[0]=e,b[1]=p):p=b[1];var q;b[2]!==g||b[3]!==i||b[4]!==p||b[5]!==m?(q=j.jsx(c("MWXPressable.react"),{"aria-label":g,focusable:!1,onPress:i,testid:void 0,xstyle:l.tapTargetOverlay,children:p}),b[2]=g,b[3]=i,b[4]=p,b[5]=m,b[6]=q):q=b[6];g=q;b[7]!==f?(i={0:{className:"x6s0dn4 x78zum5 xl56j7k x1hc1fzr x1n2onr6 x1ebt8du x1jl3cmp x1dhq9h xfwg19i x1vjfegm x5yr21d"},1:{className:"x6s0dn4 x78zum5 xl56j7k x1n2onr6 x1jl3cmp xfwg19i x1vjfegm xg01cxk xhb22t3 xls3em1 xlshs6z x5yr21d"}}[!!f<<0],b[7]=f,b[8]=i):i=b[8];b[9]!==g||b[10]!==a?(p=a!=null?j.jsx(c("CometTrackingNodeProvider.react"),{trackingNode:a,children:g}):g,b[9]=g,b[10]=a,b[11]=p):p=b[11];b[12]!==i||b[13]!==p?(m=j.jsx("div",babelHelpers["extends"]({},i,{children:p})),b[12]=i,b[13]=p,b[14]=m):m=b[14];return m}g["default"]=a}),98);
__d("MWMediaViewerRenderQpl",["MWMediaRenderQplUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("MWMediaRenderQplUtils").useCommonMediaRenderQplForAttachment(a,b,"full_screen_view")}g.useMediaViewerRenderQpl=a}),98);
__d("MWV2MediaViewerControls.react",["fbt","FDSCircleButton.react","FDSCrossFilled16Icon","FDSPhotoDownloadFilled16Icon","Int64Hooks","LSMessagingThreadTypeUtil","MDSRow.react","MDSRowItem.react","MWChatForwardCircleButton.react","MWV2MediaViewerContext.react","MWXTooltip.react","react","react-compiler-runtime","useMWHasForwardAction","useMWV2MessageForwardAction"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useContext,l=h._(/*BTDS*/"Download");function a(a){var b=d("react-compiler-runtime").c(15),e=a.attachment,f=a.message,g=a.onClose;a=a.thread;var i=k(d("MWV2MediaViewerContext.react").context),n;b[0]!==e||b[1]!==i?(n=i.getDownloadUrl(e,"MWV2MediaViewerControls"),b[0]=e,b[1]=i,b[2]=n):n=b[2];i=n;b[3]!==i?(n=i!=null?j.jsx(c("MDSRowItem.react"),{children:j.jsx(c("MWXTooltip.react"),{tooltip:l,children:j.jsx(c("FDSCircleButton.react"),{color_DEPRECATED:"white",icon:c("FDSPhotoDownloadFilled16Icon"),label:l,linkProps:{download:!0,target:"_blank",url:i},size:36,type_DEPRECATED:"dark-overlay"})})}):null,b[3]=i,b[4]=n):n=b[4];b[5]!==e||b[6]!==f||b[7]!==a?(i=f!=null?j.jsx(m,{attachment:e,message:f,thread:a}):null,b[5]=e,b[6]=f,b[7]=a,b[8]=i):i=b[8];b[9]!==g?(e=g!=null?j.jsx(c("MDSRowItem.react"),{children:j.jsx(c("FDSCircleButton.react"),{color_DEPRECATED:"white",icon:c("FDSCrossFilled16Icon"),label:h._(/*BTDS*/"Close"),onPress:g,size:36,type_DEPRECATED:"dark-overlay"})}):null,b[9]=g,b[10]=e):e=b[10];b[11]!==n||b[12]!==i||b[13]!==e?(f=j.jsxs(c("MDSRow.react"),{paddingTop:0,spacing:8,children:[n,i,e]}),b[11]=n,b[12]=i,b[13]=e,b[14]=f):f=b[14];return f}function m(a){var b=d("react-compiler-runtime").c(9),e=a.attachment,f=a.message,g=a.thread;a=e==null?void 0:e.attachmentFbid;var i;b[0]!==g.threadType?(i=d("LSMessagingThreadTypeUtil").isArmadilloSecure(g.threadType),b[0]=g.threadType,b[1]=i):i=b[1];i=i;var k,l;b[2]!==g.threadType?(k=function(){return g.threadType},l=[g.threadType],b[2]=g.threadType,b[3]=k,b[4]=l):(k=b[3],l=b[4]);k=d("Int64Hooks").useMemoInt64(k,l);l=c("useMWV2MessageForwardAction")(i,f,k);i=c("useMWHasForwardAction")(g.threadType,f,e);k=i.shouldShowForwardAction;if(a==null||!k)return null;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(f=h._(/*BTDS*/"Forward"),b[5]=f):f=b[5];b[6]!==a||b[7]!==l?(e=j.jsx(c("MDSRowItem.react"),{children:j.jsx(c("MWXTooltip.react"),{tooltip:f,children:j.jsx(c("MWChatForwardCircleButton.react"),{attachmentID:a,color:"white",onOpenForwardDialog:l,type:"dark_overlay"})})}),b[6]=a,b[7]=l,b[8]=e):e=b[8];return e}g["default"]=a}),226);
__d("MWV2MediaViewerControlsV2.react",["fbt","CometPlaceholder.react","FDSCircleButton.react","FDSCrossFilled16Icon","FDSPhotoDownloadFilled16Icon","Int64Hooks","LSMessagingThreadTypeUtil","MDSRow.react","MDSRowItem.react","MWChatForwardCircleButton.react","MWV2MediaViewerContext.react","MWXTooltip.react","react","react-compiler-runtime","useMWHasForwardAction","useMWV2MessageForwardAction"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useContext,l=h._(/*BTDS*/"Download"),m=h._(/*BTDS*/"Download not ready");function n(a){var b=d("react-compiler-runtime").c(5);a=a.attachment;var e=k(d("MWV2MediaViewerContext.react").context),f;b[0]!==a||b[1]!==e?(f=e.getDownloadUrl(a,"MWV2MediaViewerControls"),b[0]=a,b[1]=e,b[2]=f):f=b[2];a=f;if(a==null)return null;b[3]!==a?(e=j.jsx(c("MWXTooltip.react"),{tooltip:l,children:j.jsx(c("FDSCircleButton.react"),{color_DEPRECATED:"white",icon:c("FDSPhotoDownloadFilled16Icon"),label:l,linkProps:{download:!0,target:"_blank",url:a},size:36,type_DEPRECATED:"dark-overlay"})}),b[3]=a,b[4]=e):e=b[4];return e}function o(){var a=d("react-compiler-runtime").c(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=j.jsx(c("MWXTooltip.react"),{tooltip:l,children:j.jsx(c("FDSCircleButton.react"),{color_DEPRECATED:"white",disabled:!0,icon:c("FDSPhotoDownloadFilled16Icon"),label:m,size:36,type_DEPRECATED:"dark-overlay"})}),a[0]=b):b=a[0];return b}function a(a){var b=d("react-compiler-runtime").c(13),e=a.attachment,f=a.message,g=a.onClose;a=a.thread;var i;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(i=j.jsx(o,{}),b[0]=i):i=b[0];b[1]!==e?(i=j.jsx(c("MDSRowItem.react"),{children:j.jsx(c("CometPlaceholder.react"),{fallback:i,children:j.jsx(n,{attachment:e})})}),b[1]=e,b[2]=i):i=b[2];var k;b[3]!==e||b[4]!==f||b[5]!==a?(k=f!=null?j.jsx(p,{attachment:e,message:f,thread:a}):null,b[3]=e,b[4]=f,b[5]=a,b[6]=k):k=b[6];b[7]!==g?(e=g!=null?j.jsx(c("MDSRowItem.react"),{children:j.jsx(c("FDSCircleButton.react"),{color_DEPRECATED:"white",icon:c("FDSCrossFilled16Icon"),label:h._(/*BTDS*/"Close"),onPress:g,size:36,type_DEPRECATED:"dark-overlay"})}):null,b[7]=g,b[8]=e):e=b[8];b[9]!==i||b[10]!==k||b[11]!==e?(f=j.jsxs(c("MDSRow.react"),{paddingTop:0,spacing:8,children:[i,k,e]}),b[9]=i,b[10]=k,b[11]=e,b[12]=f):f=b[12];return f}function p(a){var b=d("react-compiler-runtime").c(9),e=a.attachment,f=a.message,g=a.thread;a=e==null?void 0:e.attachmentFbid;var i;b[0]!==g.threadType?(i=d("LSMessagingThreadTypeUtil").isArmadilloSecure(g.threadType),b[0]=g.threadType,b[1]=i):i=b[1];i=i;var k,l;b[2]!==g.threadType?(k=function(){return g.threadType},l=[g.threadType],b[2]=g.threadType,b[3]=k,b[4]=l):(k=b[3],l=b[4]);k=d("Int64Hooks").useMemoInt64(k,l);l=c("useMWV2MessageForwardAction")(i,f,k);i=c("useMWHasForwardAction")(g.threadType,f,e);k=i.shouldShowForwardAction;if(a==null||!k)return null;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(f=h._(/*BTDS*/"Forward"),b[5]=f):f=b[5];b[6]!==a||b[7]!==l?(e=j.jsx(c("MDSRowItem.react"),{children:j.jsx(c("MWXTooltip.react"),{tooltip:f,children:j.jsx(c("MWChatForwardCircleButton.react"),{attachmentID:a,color:"white",onOpenForwardDialog:l,type:"dark_overlay"})})}),b[6]=a,b[7]=l,b[8]=e):e=b[8];return e}g["default"]=a}),226);
__d("MWV2MediaViewerControlsContainer.react",["CometPlaceholder.react","MWV2MediaViewerControls.react","MWV2MediaViewerControlsFallback.react","MWV2MediaViewerControlsV2.react","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(5),e=a.attachment,f=a.message,g=a.onClose;a=a.thread;var h;b[0]!==e||b[1]!==f||b[2]!==g||b[3]!==a?(h=c("gkx")("11885")?i.jsx(c("MWV2MediaViewerControlsV2.react"),{attachment:e,message:f,onClose:g,thread:a}):i.jsx(c("CometPlaceholder.react"),{fallback:g!=null?i.jsx(c("MWV2MediaViewerControlsFallback.react"),{onClose:g}):null,name:"MWV2MediaViewerContent.Controls",children:i.jsx(c("MWV2MediaViewerControls.react"),{attachment:e,message:f,onClose:g,thread:a})}),b[0]=e,b[1]=f,b[2]=g,b[3]=a,b[4]=h):h=b[4];return h}g["default"]=a}),98);
__d("MWV2MediaViewerItemVideo.react",["MWChatVideoPlayer.react","MWV2MediaViewerContext.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext;function a(a){var b=d("react-compiler-runtime").c(10),e=a.attachment,f=a.isSecure;a=a.mediaRenderQpl;var g=j(d("MWV2MediaViewerContext.react").context);g=g.getPlayableUrl;var h;b[0]!==e||b[1]!==g||b[2]!==a?(h=g(e,"MediaViewerVideo",a),b[0]=e,b[1]=g,b[2]=a,b[3]=h):h=b[3];g=h;if(g!=null){b[4]===Symbol["for"]("react.memo_cache_sentinel")?(h={className:"x78zum5 x1iyjqo2 xmz0i5r"},b[4]=h):h=b[4];b[5]!==e.attachmentFbid||b[6]!==f||b[7]!==a||b[8]!==g?(h=i.jsx("div",babelHelpers["extends"]({},h,{children:i.jsx(c("MWChatVideoPlayer.react"),{controls:"mwchat",fbid:e.attachmentFbid,hideExpandButton:!1,isMediaViewer:!0,isSecure:f,mediaRenderQpl:a,originalHeight:1e3,originalWidth:1e3,sdSrc:g,shouldForcePauseOnClick:!1})})),b[5]=e.attachmentFbid,b[6]=f,b[7]=a,b[8]=g,b[9]=h):h=b[9];return h}else{a.endFail("missing-playable-url");return null}}g["default"]=a}),98);
__d("MWV2MediaViewerNullState.react",["fbt","CometColumn.react","CometColumnItem.react","FDSNullState.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){var a=d("react-compiler-runtime").c(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=j.jsx(c("CometColumn.react"),{expanding:!0,verticalAlign:"center",children:j.jsx(c("CometColumnItem.react"),{children:j.jsx(c("FDSNullState.react"),{headline:h._(/*BTDS*/"Sorry, this content isn't available right now")})})}),a[0]=b):b=a[0];return b}g["default"]=a}),226);
__d("MWV2MediaViewerItem.react",["I64","LSIntEnum","MWMediaViewerRenderQpl","MWV2MediaViewerItemVideo.react","MWV2MediaViewerNullState.react","MessagingAttachmentType","cr:10022","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||d("react");function a(a){var b=d("react-compiler-runtime").c(12),e=a.attachment,f=a.isSecure,g=a.onClose;a=a.threadType;if(e==null){var h;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(h=k.jsx(c("MWV2MediaViewerNullState.react"),{}),b[0]=h):h=b[0];return h}h=e.attachmentType;if(!((i||(i=d("I64"))).equal(h,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))||(i||(i=d("I64"))).equal(h,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE))||(i||(i=d("I64"))).equal(h,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))){b[1]===Symbol["for"]("react.memo_cache_sentinel")?(h=k.jsx(c("MWV2MediaViewerNullState.react"),{}),b[1]=h):h=b[1];return h}b[2]!==g?(h=c("gkx")("6691")&&k.jsx("div",babelHelpers["extends"]({"aria-hidden":!0},{className:"x1ey2m1c xds687c x17qophe x10l6tqk x13vifvy"},{"data-testid":void 0,onClick:g})),b[2]=g,b[3]=h):h=b[3];var m;b[4]!==e||b[5]!==f||b[6]!==g||b[7]!==a?(m=k.jsx(l,{attachment:e,isSecure:f,onClose:g,threadType:a}),b[4]=e,b[5]=f,b[6]=g,b[7]=a,b[8]=m):m=b[8];b[9]!==h||b[10]!==m?(e=k.jsxs(k.Fragment,{children:[h,m]}),b[9]=h,b[10]=m,b[11]=e):e=b[11];return e}function l(a){var e=d("react-compiler-runtime").c(6),f=a.attachment,g=a.isSecure,h=a.onClose;a=a.threadType;a=d("MWMediaViewerRenderQpl").useMediaViewerRenderQpl(f,a);var l=f.attachmentType,m;e[0]!==f||e[1]!==g||e[2]!==a||e[3]!==h||e[4]!==l?(m=(i||(i=d("I64"))).equal(l,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))||(i||(i=d("I64"))).equal(l,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE))?k.jsx(b("cr:10022"),{attachment:f,mediaRenderQpl:a,onClickOutsideOfImage:h}):(i||(i=d("I64"))).equal(l,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))?k.jsx(c("MWV2MediaViewerItemVideo.react"),{attachment:f,isSecure:g,mediaRenderQpl:a}):null,e[0]=f,e[1]=g,e[2]=a,e[3]=h,e[4]=l,e[5]=m):m=e[5];return m}g["default"]=a}),98);
__d("MWV2MediaViewerContent.react",["fbt","CometHideLayerOnEscape.react","CometPlaceholder.react","FDSBlurredBackgroundImage.react","I64","LSIntEnum","LSMessagingThreadTypeUtil","MWChatAttachmentMediaNavigationHotkeys.react","MWChatAttachmentMediaState.react","MWChatAttachmentMediaThumbnails.react","MWChatMediaViewerNavigationTapTarget.react","MWV2MediaViewerContainer.react","MWV2MediaViewerContext.react","MWV2MediaViewerControlsContainer.react","MWV2MediaViewerItem.react","MWXColumn.react","MWXColumnItem.react","MWXRow.react","MWXRowItem.react","MessagingAttachmentType","ReQL","ReQLSuspense","gkx","justknobx","react","react-compiler-runtime","useReStore","useShouldShowPlaybackErrorFallback","useShouldShowUnsupportedCodecFallback"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=j||(j=d("react"));b=j;var n=b.useContext,o=b.useEffect,p={mediaItem:{marginTop:"x14vqqas",marginEnd:"xq8finb",marginBottom:"xod5an3",marginStart:"x16n37ib",$$css:!0},mediaRow:{minHeight:"x2lwn1j",$$css:!0},noOverflow:{maxWidth:"x193iq5w",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}};function q(a){var b=d("react-compiler-runtime").c(6);a=a.attachment;var e=n(d("MWV2MediaViewerContext.react").context);e=e.getPreviewUrl;var f;b[0]!==a||b[1]!==e?(f=e(a,"BlurredBackground"),b[0]=a,b[1]=e,b[2]=f):f=b[2];e=f;if(e!=null&&a!=null&&!(k||(k=d("I64"))).equal(a.attachmentType,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE))){b[3]===Symbol["for"]("react.memo_cache_sentinel")?(f={className:"x1ey2m1c xds687c x17qophe xuzhngd x10l6tqk x13vifvy"},b[3]=f):f=b[3];b[4]!==e?(a=m.jsx("div",babelHelpers["extends"]({},f,{children:m.jsx(c("FDSBlurredBackgroundImage.react"),{src:e})})),b[4]=e,b[5]=a):a=b[5];return a}else return null}function a(a){var b=d("react-compiler-runtime").c(66),e=a.initialAttachment,g=a.onClose,j=a.shouldShowMessengerLogo;a=a.thread;var k=n(d("MWChatAttachmentMediaState.react").context),l=k.canMoveBackward,r=k.canMoveForward,s=k.card,t=k.moveBackward,u=k.moveForward;k=k.shouldTriggerLoadMore;var v=n(d("MWV2MediaViewerContext.react").context),w=v.getPreviewUrl,x=v.loadMore,y=(i||(i=c("useReStore")))(),z=e==null?void 0:e.threadKey,A=e==null?void 0:e.messageId;b[0]!==y.tables.attachments||b[1]!==A||b[2]!==z?(v=function(){return d("ReQL").fromTableDescending(y.tables.attachments).getKeyRange(z,A)},b[0]=y.tables.attachments,b[1]=A,b[2]=z,b[3]=v):v=b[3];var B;b[4]!==y||b[5]!==A||b[6]!==z?(B=[y,A,z],b[4]=y,b[5]=A,b[6]=z,b[7]=B):B=b[7];v=d("ReQLSuspense").useFirst(v,B,f.id+":109")!=null;var C=s!=null?s.attachment:v?e:void 0;b[8]!==C||b[9]!==y.tables.messages?(B=function(){return(C==null?void 0:C.messageId)==null?d("ReQL").empty():d("ReQL").fromTableAscending(y.tables.messages.index("messageId")).getKeyRange(C.messageId)},b[8]=C,b[9]=y.tables.messages,b[10]=B):B=b[10];s=C==null?void 0:C.messageId;b[11]!==y.tables.messages||b[12]!==s?(v=[s,y.tables.messages],b[11]=y.tables.messages,b[12]=s,b[13]=v):v=b[13];e=d("ReQLSuspense").useFirst(B,v,f.id+":125");var D=k;b[14]!==x||b[15]!==D?(s=function(){D&&x()},B=[D,x],b[14]=x,b[15]=D,b[16]=s,b[17]=B):(s=b[16],B=b[17]);o(s,B);v=c("gkx")("1775");k=c("useShouldShowUnsupportedCodecFallback")(C);s=c("useShouldShowPlaybackErrorFallback")(C);b[18]!==C||b[19]!==s||b[20]!==k||b[21]!==g||b[22]!==a?(B=!k&&!s?m.jsx(c("MWV2MediaViewerItem.react"),{attachment:C,isSecure:d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType),onClose:g,threadType:a.threadType}):null,b[18]=C,b[19]=s,b[20]=k,b[21]=g,b[22]=a,b[23]=B):B=b[23];s=B;b[24]===Symbol["for"]("react.memo_cache_sentinel")?(k=c("justknobx")._("3491"),b[24]=k):k=b[24];B=k;b[25]!==C||b[26]!==e||b[27]!==g||b[28]!==a?(k=m.jsx(c("MWV2MediaViewerControlsContainer.react"),{attachment:C,message:e,onClose:g,thread:a}),b[25]=C,b[26]=e,b[27]=g,b[28]=a,b[29]=k):k=b[29];b[30]!==g?(e=B?null:m.jsx(d("MWChatAttachmentMediaNavigationHotkeys.react").MWChatAttachmentMediaNavigationHotkeys,{onClose:v?g:void 0}),b[30]=g,b[31]=e):e=b[31];b[32]!==C?(a=m.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWV2MediaViewerContent.BlurredBackground",children:m.jsx(q,{attachment:C})}),b[32]=C,b[33]=a):a=b[33];var E;b[34]===Symbol["for"]("react.memo_cache_sentinel")?(E=[p.mediaRow,v&&p.noOverflow],b[34]=E):E=b[34];l=!l;var F;b[35]===Symbol["for"]("react.memo_cache_sentinel")?(F=h._(/*BTDS*/"Previous photo"),b[35]=F):F=b[35];b[36]!==t||b[37]!==l?(F=m.jsx(c("MWXRowItem.react"),{children:m.jsx(c("MWChatMediaViewerNavigationTapTarget.react"),{direction:"previous",invisible:l,label:F,onClick:t,testid:void 0})}),b[36]=t,b[37]=l,b[38]=F):F=b[38];b[39]!==s?(t=m.jsx(c("MWXRowItem.react"),{expanding:!0,verticalAlign:"stretch",xstyle:v&&p.mediaItem,children:m.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWV2MediaViewerContent.MediaContent",children:s})}),b[39]=s,b[40]=t):t=b[40];l=!r;b[41]===Symbol["for"]("react.memo_cache_sentinel")?(s=h._(/*BTDS*/"Next photo"),b[41]=s):s=b[41];b[42]!==u||b[43]!==l?(r=m.jsx(c("MWXRowItem.react"),{children:m.jsx(c("MWChatMediaViewerNavigationTapTarget.react"),{direction:"next",invisible:l,label:s,onClick:u,testid:void 0})}),b[42]=u,b[43]=l,b[44]=r):r=b[44];b[45]!==F||b[46]!==t||b[47]!==r?(s=m.jsx(c("MWXColumnItem.react"),{expanding:!0,verticalAlign:"center",children:m.jsxs(c("MWXRow.react"),{align:"justify",expanding:!0,paddingHorizontal:0,paddingVertical:0,spacingHorizontal:v?0:void 0,verticalAlign:"stretch",xstyle:E,children:[F,t,r]})}),b[45]=F,b[46]=t,b[47]=r,b[48]=s):s=b[48];b[49]!==w?(u=m.jsx(c("MWXColumnItem.react"),{children:m.jsx(c("MWChatAttachmentMediaThumbnails.react"),{getPreviewUrl:w})}),b[49]=w,b[50]=u):u=b[50];b[51]!==s||b[52]!==u?(l=m.jsxs(c("MWXColumn.react"),{align:"stretch",expanding:!0,paddingHorizontal:0,verticalAlign:"space-between",children:[s,u]}),b[51]=s,b[52]=u,b[53]=l):l=b[53];b[54]!==j||b[55]!==k||b[56]!==e||b[57]!==a||b[58]!==l?(E=m.jsxs(c("MWV2MediaViewerContainer.react"),{actions:k,shouldShowMessengerLogo:j,children:[e,a,l]}),b[54]=j,b[55]=k,b[56]=e,b[57]=a,b[58]=l,b[59]=E):E=b[59];F=E;if(g!=null&&!v){b[60]!==F||b[61]!==g?(t=m.jsx(c("CometHideLayerOnEscape.react"),{onHide:g,children:F}),b[60]=F,b[61]=g,b[62]=t):t=b[62];return t}else{if(B){r=v?g:void 0;b[63]!==F||b[64]!==r?(w=m.jsx(d("MWChatAttachmentMediaNavigationHotkeys.react").MWChatAttachmentMediaNavigationHotkeys,{onClose:r,children:F}),b[63]=F,b[64]=r,b[65]=w):w=b[65];return w}return F}}g["default"]=a}),226);
__d("useMWV2MediaViewerOpenDownloadUrl",["react","react-compiler-runtime","useMWV2MediaViewerOpenPlayableUrl"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(){var a=d("react-compiler-runtime").c(2),b=c("useMWV2MediaViewerOpenPlayableUrl")(),e;a[0]!==b?(e=function(a,c,d){a=b(a,c,d);if(a==null)return;c=new URL(a);c.searchParams.set("dl","1");return c.toString()},a[0]=b,a[1]=e):e=a[1];return e}g["default"]=a}),98);
__d("MWV2MediaViewerCutoverWrapper.react",["LSThreadMediaGalleryGroup","MWChatAttachmentMediaState.react","MWMessageSearchStatusTypes","MWV2MediaViewerContext.react","cr:14186","emptyFunction","justknobx","react","react-compiler-runtime","useMAWLoadMoreCutoverThreadSharedAttachments","useMWMediaGalleryRestoreStatus","useMWV2MediaViewerOpenDownloadUrl","useMWV2MediaViewerOpenPlayableUrl","useMWV2MediaViewerOpenPreviewUrl","useMWV2MediaViewerSecurePlayableUrl_CausesSuspense","useMWV2MediaViewerSecurePreviewUrl_CausesSuspense"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;function a(a){var e=d("react-compiler-runtime").c(30),f=a.children,g=a.initialAttachment,h=a.openThreadKey,k=a.secureThreadKey;a=a.threadType;var l;e[0]!==k||e[1]!==a?(l={threadKey:k,threadType:a},e[0]=k,e[1]=a,e[2]=l):l=e[2];b("cr:14186")(l);e[3]!==k||e[4]!==a?(l={threadKey:k,threadType:a},e[3]=k,e[4]=a,e[5]=l):l=e[5];l=c("useMWMediaGalleryRestoreStatus")(l);l=l===d("MWMessageSearchStatusTypes").RestoreStatus.IN_PROGRESS;var m;e[6]===Symbol["for"]("react.memo_cache_sentinel")?(m={entrypoint:"media_viewer"},e[6]=m):m=e[6];var n;e[7]===Symbol["for"]("react.memo_cache_sentinel")?(n=c("justknobx")._("3233"),e[7]=n):n=e[7];k=c("useMAWLoadMoreCutoverThreadSharedAttachments")(k,h,a,m,c("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS,l,n);h=k.attachments;a=k.onLoadMore;var o=j,p=c("useMWV2MediaViewerOpenPreviewUrl")(),q=c("useMWV2MediaViewerOpenPlayableUrl")(),r=c("useMWV2MediaViewerOpenDownloadUrl")(),s=c("useMWV2MediaViewerSecurePreviewUrl_CausesSuspense")(),t=c("useMWV2MediaViewerSecurePlayableUrl_CausesSuspense")();e[8]!==p||e[9]!==s?(m=function(a,b,c){if(!a)return"";return!o(a)?p(a,b,c):s(a,b,c)},e[8]=p,e[9]=s,e[10]=m):m=e[10];l=m;e[11]!==q||e[12]!==t?(n=function(a,b,c){if(a==null)return"";return!o(a)?q(a,b,c):t(a,b,c)},e[11]=q,e[12]=t,e[13]=n):n=e[13];k=n;e[14]!==r||e[15]!==t?(m=function(a,b,c){if(a==null)return"";return!o(a)?r(a,b,c):t(a,b,c)},e[14]=r,e[15]=t,e[16]=m):m=e[16];n=m;e[17]!==h||e[18]!==f||e[19]!==k||e[20]!==l||e[21]!==g?(m=i.jsx(d("MWChatAttachmentMediaState.react").MWChatAttachmentMediaStateProviderFromAttachments,{attachments:h,getIsSecureThread:o,getPlayableUrl:k,getPreviewUrl:l,initialAttachment:g,children:f}),e[17]=h,e[18]=f,e[19]=k,e[20]=l,e[21]=g,e[22]=m):m=e[22];e[23]!==h||e[24]!==n||e[25]!==k||e[26]!==l||e[27]!==a||e[28]!==m?(f=i.jsx(d("MWV2MediaViewerContext.react").MWV2MediaViewerContextProvider,{getDownloadUrl:n,getPlayableUrl:k,getPreviewUrl:l,heroLoggingComponent:c("emptyFunction"),loadMore:a,media:h,children:m}),e[23]=h,e[24]=n,e[25]=k,e[26]=l,e[27]=a,e[28]=m,e[29]=f):f=e[29];return f}function j(a){return!((a==null?void 0:a.transportKey)==="FBBroker"||(a==null?void 0:a.transportKey)==="FBLegacyBroker")}g["default"]=a}),98);
__d("MWV2MediaViewerOpenWrapper.react",["CometHero.react","MWChatAttachmentMediaState.react","MWSharedAttachmentsSectionHooks","MWV2MediaViewerContext.react","react","react-compiler-runtime","useLoadMoreThreadSharedAttachments.react","useMWMediaLoadingQplLogger","useMWV2MediaViewerOpenDownloadUrl","useMWV2MediaViewerOpenPlayableUrl","useMWV2MediaViewerOpenPreviewUrl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;function a(a){var b=d("react-compiler-runtime").c(22),e=a.children,f=a.initialAttachment;a=a.thread;var g=d("MWSharedAttachmentsSectionHooks").useQueryMediaAttachments(a.threadKey),h=g[0],l=g[1],m=g[2];g=g[4];var n;b[0]!==a.threadType?(n={entrypoint:"media_viewer",threadType:a.threadType},b[0]=a.threadType,b[1]=n):n=b[1];n=c("useMWMediaLoadingQplLogger")(n);l=c("useLoadMoreThreadSharedAttachments.react")(l,a.threadKey,n.logLoadMediaStart);g=(a=g)!=null?a:!0;b[2]!==m||b[3]!==l||b[4]!==h||b[5]!==n.logLoadMediaCancel||b[6]!==n.logLoadMediaSuccess||b[7]!==g?(a={attachmentsRange:m,hasMore:g,loadMore:l,logLoadMediaCancel:n.logLoadMediaCancel,logLoadMediaSuccess:n.logLoadMediaSuccess,media:h},b[2]=m,b[3]=l,b[4]=h,b[5]=n.logLoadMediaCancel,b[6]=n.logLoadMediaSuccess,b[7]=g,b[8]=a):a=b[8];m=d("MWSharedAttachmentsSectionHooks").useLoader(a);l=m[1];n=c("useMWV2MediaViewerOpenPreviewUrl")();g=c("useMWV2MediaViewerOpenPlayableUrl")();a=c("useMWV2MediaViewerOpenDownloadUrl")();m=k;b[9]!==e||b[10]!==g||b[11]!==n||b[12]!==f||b[13]!==h?(m=i.jsx(d("MWChatAttachmentMediaState.react").MWChatAttachmentMediaStateProviderFromAttachments,{attachments:h,getIsSecureThread:m,getPlayableUrl:g,getPreviewUrl:n,initialAttachment:f,children:e}),b[9]=e,b[10]=g,b[11]=n,b[12]=f,b[13]=h,b[14]=m):m=b[14];b[15]!==a||b[16]!==g||b[17]!==n||b[18]!==l||b[19]!==h||b[20]!==m?(e=i.jsx(d("MWV2MediaViewerContext.react").MWV2MediaViewerContextProvider,{getDownloadUrl:a,getPlayableUrl:g,getPreviewUrl:n,heroLoggingComponent:j,loadMore:l,media:h,children:m}),b[15]=a,b[16]=g,b[17]=n,b[18]=l,b[19]=h,b[20]=m,b[21]=e):e=b[21];return e}function j(a){return i.jsx(c("CometHero.react"),{description:a})}j.displayName=j.name+" [from "+f.id+"]";function k(){return!1}g["default"]=a}),98);
__d("MWV2MediaViewerSecureWrapper.react",["LSThreadMediaGalleryGroup","MAWDbMsg","MWChatAttachmentMediaState.react","MWSharedAttachmentsSectionHooks","MWV2MediaViewerContext.react","MWV2MediaViewerNullState.react","cr:14186","cr:5709","cr:5931","cr:5970","emptyFunction","justknobx","react","react-compiler-runtime","useMAWQuerySecureMediaAttachments","useMWMediaLoadingQplLogger","useMWV2MediaViewerSecurePlayableUrl_CausesSuspense","useMWV2MediaViewerSecurePreviewUrl_CausesSuspense"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;function a(a){return j}function j(){}var k=b("cr:5709")==null?a:b("cr:5709");function e(a){var e=d("react-compiler-runtime").c(34),f=a.children,g=a.initialAttachment;a=a.thread;var h=c("useMAWQuerySecureMediaAttachments")(a.threadKey),j=h[0],m=h[2],n=h[3];h=h[4];b("cr:14186")(a);var o=(h=h)!=null?h:!0;e[0]!==a.threadType?(h={entrypoint:"media_viewer",threadType:a.threadType},e[0]=a.threadType,e[1]=h):h=e[1];h=c("useMWMediaLoadingQplLogger")(h);if(e[2]!==(m==null?void 0:m.lastLoadedMessageId)){var p;p=(p=d("MAWDbMsg").toMsgId((p=m==null?void 0:m.lastLoadedMessageId)!=null?p:""))!=null?p:void 0;e[2]=m==null?void 0:m.lastLoadedMessageId;e[3]=p}else p=e[3];var q;e[4]===Symbol["for"]("react.memo_cache_sentinel")?(q=c("justknobx")._("3233"),e[4]=q):q=e[4];e[5]!==o||e[6]!==n||e[7]!==h||e[8]!==p||e[9]!==a.threadKey?(q={earliestLoadedMediaMessageId:p,hasMoreBefore:o,mediaGalleryGroup:c("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS,minTimestampMs:n,pageSize:q,qplLogger:h,threadKey:a.threadKey},e[5]=o,e[6]=n,e[7]=h,e[8]=p,e[9]=a.threadKey,e[10]=q):q=e[10];var r=k(q);e[11]!==o||e[12]!==r?(n=function(){o&&r()},e[11]=o,e[12]=r,e[13]=n):n=e[13];p=n;e[14]!==m||e[15]!==o||e[16]!==p||e[17]!==j||e[18]!==h.logLoadMediaCancel||e[19]!==h.logLoadMediaSuccess?(a={attachmentsRange:m,hasMore:o,loadMore:p,logLoadMediaCancel:h.logLoadMediaCancel,logLoadMediaSuccess:h.logLoadMediaSuccess,media:j},e[14]=m,e[15]=o,e[16]=p,e[17]=j,e[18]=h.logLoadMediaCancel,e[19]=h.logLoadMediaSuccess,e[20]=a):a=e[20];q=d("MWSharedAttachmentsSectionHooks").useLoader(a);n=q[1];m=c("useMWV2MediaViewerSecurePreviewUrl_CausesSuspense")();p=c("useMWV2MediaViewerSecurePlayableUrl_CausesSuspense")();h=l;if(b("cr:5970")==null||b("cr:5931")==null){e[21]===Symbol["for"]("react.memo_cache_sentinel")?(a=i.jsx(c("MWV2MediaViewerNullState.react"),{}),e[21]=a):a=e[21];return a}e[22]!==f||e[23]!==p||e[24]!==m||e[25]!==g||e[26]!==j?(q=i.jsx(d("MWChatAttachmentMediaState.react").MWChatAttachmentMediaStateProviderFromAttachments,{attachments:j,getIsSecureThread:h,getPlayableUrl:p,getPreviewUrl:m,initialAttachment:g,children:f}),e[22]=f,e[23]=p,e[24]=m,e[25]=g,e[26]=j,e[27]=q):q=e[27];e[28]!==p||e[29]!==m||e[30]!==n||e[31]!==j||e[32]!==q?(a=i.jsx(d("MWV2MediaViewerContext.react").MWV2MediaViewerContextProvider,{getDownloadUrl:p,getPlayableUrl:p,getPreviewUrl:m,heroLoggingComponent:c("emptyFunction"),loadMore:n,media:j,children:q}),e[28]=p,e[29]=m,e[30]=n,e[31]=j,e[32]=q,e[33]=a):a=e[33];return a}function l(){return!0}g["default"]=e}),98);
__d("MWV2MediaViewer.react",["FBLogger","FocusRegion.react","FocusWithinHandler.react","I64","LSMessagingThreadTypeUtil","MAWMediaGalleryM2Utils","MAWThreadCutover","MWFocusTable.react","MWLSThread","MWLSThreadDisplayContext","MWPThreadCapabilitiesContext","MWV2MediaViewerContent.react","MWV2MediaViewerCutoverWrapper.react","MWV2MediaViewerNullState.react","MWV2MediaViewerOpenWrapper.react","MWV2MediaViewerSecureWrapper.react","XPlatReactFocusRegion.react","focusScopeQueries","gkx","justknobx","react","react-compiler-runtime","requireDeferred","useMWMediaViewerOpenQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));b=h;b.useCallback;var k=b.useEffect,l=b.useId,m=c("requireDeferred")("MAWFTSRestoreSync").__setRef("MWV2MediaViewer.react");function a(a){var b=d("react-compiler-runtime").c(61),e=a.attachment,f=a.onClose;a=a.shouldShowMessengerLogo;var g=d("useMWMediaViewerOpenQPLLogger").useMWMediaViewerOpenQPLLogger(),h=g.endSuccess,n;b[0]!==h?(g=function(){h()},n=[h],b[0]=h,b[1]=g,b[2]=n):(g=b[1],n=b[2]);k(g,n);g=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();var o=g==="ChatTab";b[3]!==o?(n=function(){if(!c("justknobx")._("3195")||!d("MAWMediaGalleryM2Utils").isMediaGalleryM2Enabled())return;m.onReady(function(a){a=a.getFTSRestoreSync;a=a();o&&(a.setIsStarted(!1),a.setShouldPauseRestore(!0))})},b[3]=o,b[4]=n):n=b[4];var p=n;g=d("MWLSThread").useThread(e.threadKey);n=d("MWPThreadCapabilitiesContext").Provider;var q=l(),r;b[5]!==q?(r=function(a){a||d("FocusRegion.react").focusRegionById(q,d("MWFocusTable.react").tabbableScopeQuery)},b[5]=q,b[6]=r):r=b[6];r=r;var s=d("MAWThreadCutover").useGetCutoverOpenThreadKey(e.threadKey),t=d("MAWThreadCutover").useCutoverSecureThreadKeyForOpenThreadKey(s==null?e.threadKey:void 0);if(g==null){c("FBLogger")("messenger_web_media").mustfix("Thread is null in media viewer for attachment with threadKey: %s",(i||(i=d("I64"))).to_string(e.threadKey));var u;b[7]===Symbol["for"]("react.memo_cache_sentinel")?(u=j.jsx(c("MWV2MediaViewerNullState.react"),{}),b[7]=u):u=b[7];return u}u=d("LSMessagingThreadTypeUtil").isArmadilloSecure(g.threadType);if(s!=null||t!=null){s=s!=null?s:g.threadKey;t=t!=null?t:g.threadKey;var v;b[8]!==f||b[9]!==p?(v=function(){p(),f&&f()},b[8]=f,b[9]=p,b[10]=v):v=b[10];var w;b[11]!==e||b[12]!==a||b[13]!==v||b[14]!==g?(w=j.jsx(c("MWV2MediaViewerContent.react"),{initialAttachment:e,onClose:v,shouldShowMessengerLogo:a,thread:g}),b[11]=e,b[12]=a,b[13]=v,b[14]=g,b[15]=w):w=b[15];b[16]!==e||b[17]!==s||b[18]!==t||b[19]!==w||b[20]!==g.threadType?(v=j.jsx(c("MWV2MediaViewerCutoverWrapper.react"),{initialAttachment:e,openThreadKey:s,secureThreadKey:t,threadType:g.threadType,children:w}),b[16]=e,b[17]=s,b[18]=t,b[19]=w,b[20]=g.threadType,b[21]=v):v=b[21];s=v;b[22]!==s||b[23]!==g?(t=c("gkx")("1372")?j.jsx(n,{thread:g,children:s}):s,b[22]=s,b[23]=g,b[24]=t):t=b[24];w=t;b[25]!==w||b[26]!==q?(v=j.jsx(c("XPlatReactFocusRegion.react"),{autoFocusQuery:d("MWFocusTable.react").tabbableScopeQuery,containFocusQuery:d("MWFocusTable.react").tabbableScopeQuery,id:q,recoverFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:w}),b[25]=w,b[26]=q,b[27]=v):v=b[27];s=v;b[28]!==s||b[29]!==r?(t=c("justknobx")._("3588")?j.jsx(c("FocusWithinHandler.react"),{onFocusChange:r,onFocusVisibleChange:r,children:s}):s,b[28]=s,b[29]=r,b[30]=t):t=b[30];return t}if(u){b[31]!==f||b[32]!==p?(w=function(){p(),f&&f()},b[31]=f,b[32]=p,b[33]=w):w=b[33];b[34]!==e||b[35]!==a||b[36]!==w||b[37]!==g?(v=j.jsx(c("MWV2MediaViewerContent.react"),{initialAttachment:e,onClose:w,shouldShowMessengerLogo:a,thread:g}),b[34]=e,b[35]=a,b[36]=w,b[37]=g,b[38]=v):v=b[38];b[39]!==e||b[40]!==v||b[41]!==g?(s=j.jsx(c("MWV2MediaViewerSecureWrapper.react"),{initialAttachment:e,thread:g,children:v}),b[39]=e,b[40]=v,b[41]=g,b[42]=s):s=b[42];t=s;b[43]!==t||b[44]!==g?(u=c("gkx")("1372")?j.jsx(n,{thread:g,children:t}):t,b[43]=t,b[44]=g,b[45]=u):u=b[45];w=u;b[46]!==w||b[47]!==q?(v=j.jsx(c("XPlatReactFocusRegion.react"),{autoFocusQuery:d("MWFocusTable.react").tabbableScopeQuery,containFocusQuery:d("MWFocusTable.react").tabbableScopeQuery,id:q,recoverFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:w}),b[46]=w,b[47]=q,b[48]=v):v=b[48];s=v;b[49]!==s||b[50]!==r?(n=c("justknobx")._("3588")?j.jsx(c("FocusWithinHandler.react"),{onFocusChange:r,onFocusVisibleChange:r,children:s}):s,b[49]=s,b[50]=r,b[51]=n):n=b[51];return n}b[52]!==e||b[53]!==f||b[54]!==a||b[55]!==g?(t=j.jsx(c("MWV2MediaViewerContent.react"),{initialAttachment:e,onClose:f,shouldShowMessengerLogo:a,thread:g}),b[52]=e,b[53]=f,b[54]=a,b[55]=g,b[56]=t):t=b[56];b[57]!==e||b[58]!==t||b[59]!==g?(u=j.jsx(c("MWV2MediaViewerOpenWrapper.react"),{initialAttachment:e,thread:g,children:t}),b[57]=e,b[58]=t,b[59]=g,b[60]=u):u=b[60];return u}g["default"]=a}),98);
__d("MWV2MediaViewerAspectRatioContainer.react",["BaseAspectRatioContainer.react","react","react-compiler-runtime","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={containerMaxSize:function(a,b){var c;return[{aspectRatio:b==null?null:"x1f7gzso",marginTop:"xr1yuqi",marginEnd:"xkrivgy",marginBottom:"x4ii5y1",marginStart:"x1gryazu",maxHeight:"min(calc(100vh - 76px),"+((c=a)!=null?c:1e4)+"px)"==null?null:"x1kb659o",$$css:!0},{"--aspectRatio":b!=null?b:void 0,"--maxHeight":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}("min(calc(100vh - 76px),"+((c=a)!=null?c:1e4)+"px)")}]}};function a(a){var b=d("react-compiler-runtime").c(14),e=a.children,f=a.height,g=a.onClickOutsideOfChildren;a=a.width;a=a!=null&&f!=null?a/f:1;var i;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(i={className:"x5yr21d xh8yej3"},b[0]=i):i=b[0];var m;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(m={className:"x1m82ljr x8cgc45 xr1yuqi xkrivgy x4ii5y1 x1gryazu x1n2onr6 xtzzx4i xwa60dl x11lhmoz"},b[1]=m):m=b[1];var n;b[2]!==a||b[3]!==f?(n=(h||(h=c("stylex"))).props(k.containerMaxSize(f,a)),b[2]=a,b[3]=f,b[4]=n):n=b[4];b[5]!==a||b[6]!==e?(f=j.jsx(c("BaseAspectRatioContainer.react"),{aspectRatio:a,children:e}),b[5]=a,b[6]=e,b[7]=f):f=b[7];b[8]!==n||b[9]!==f?(a=j.jsx("div",babelHelpers["extends"]({},m,{children:j.jsx("div",babelHelpers["extends"]({},n,{"aria-hidden":!0,onClick:l,children:f}))})),b[8]=n,b[9]=f,b[10]=a):a=b[10];b[11]!==g||b[12]!==a?(e=j.jsx("div",babelHelpers["extends"]({"aria-hidden":!0},i,{onClick:g,children:a})),b[11]=g,b[12]=a,b[13]=e):e=b[13];return e}function l(a){a.cancelBubble=!0,a.stopPropagation()}g["default"]=a}),98);
__d("MWV2MediaViewerItemImageV2.react",["fbt","BaseImage.react","I64","MWAnimatedImageControlsUtil","MWAnimatedImageThumbnailWithPlayButton.react","MWV2MediaViewerAspectRatioContainer.react","MWV2MediaViewerContext.react","MWXIconHd","MWXIconStrict.react","MWXPressable.react","MWXThreadThemeColor","MessagingAttachmentType","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react"));b=i;var l=b.useContext,m=b.useEffect,n=b.useRef,o=b.useState;function a(a){var b=d("react-compiler-runtime").c(34),e=a.attachment,f=a.mediaRenderQpl;a=a.onClickOutsideOfImage;var g=d("MWAnimatedImageControlsUtil").useGetMessengerAutoplaySetting(),i=l(d("MWV2MediaViewerContext.react").context),q=i.getPlayableUrl;i=i.heroLoggingComponent;var r=n(null),s=o(!1),t=s[0],u=s[1],v;b[0]!==f?(s=function(){var a;r.current!=null&&((a=r.current)==null?void 0:a.complete)&&f.endSuccess()},v=[f],b[0]=f,b[1]=s,b[2]=v):(s=b[1],v=b[2]);m(s,v);b[3]!==e.previewHeight||b[4]!==e.previewHeightLarge?(s=e.previewHeightLarge!=null?(j||(j=d("I64"))).to_float(e.previewHeightLarge):e.previewHeight!=null?(j||(j=d("I64"))).to_float(e.previewHeight):void 0,b[3]=e.previewHeight,b[4]=e.previewHeightLarge,b[5]=s):s=b[5];v=s;b[6]!==e.previewWidth||b[7]!==e.previewWidthLarge?(s=e.previewWidthLarge!=null?(j||(j=d("I64"))).to_float(e.previewWidthLarge):e.previewWidth!=null?(j||(j=d("I64"))).to_float(e.previewWidth):void 0,b[6]=e.previewWidth,b[7]=e.previewWidthLarge,b[8]=s):s=b[8];s=s;var w=(j||(j=d("I64"))).to_int32(e.attachmentType)===c("MessagingAttachmentType").ANIMATED_IMAGE,x;b[9]!==e||b[10]!==q||b[11]!==f?(x=q(e,"MediaViewerImage",f),b[9]=e,b[10]=q,b[11]=f,b[12]=x):x=b[12];q=x;if(q!=null){var y=w&&g!==!0;b[13]!==i?(x=i("MWV2MediaViewerImage"),b[13]=i,b[14]=x):x=b[14];b[15]!==e||b[16]!==y||b[17]!==v||b[18]!==t||b[19]!==f||b[20]!==q||b[21]!==s?(w=y!=null&&y===!0?t===!1?k.jsx(d("MWAnimatedImageThumbnailWithPlayButton.react").MWAnimatedImageThumbnailWithPlayButton,{connectBottom:!1,connectTop:!1,dbAttachment:e,entryPoint:d("MWAnimatedImageThumbnailWithPlayButton.react").AnimatedImageEntryPoint.MediaViewer,mediaRenderQpl:f,message:null,onPlay:function(){return u(!0)},outgoing:!1,previewHeight:v,previewWidth:s}):k.jsx(c("MWXPressable.react"),{"aria-label":h._(/*BTDS*/"Pause GIF"),hideHoverOverlay:!0,onPress:function(){y&&u(!1)},children:k.jsx(c("BaseImage.react"),{height:"100%",objectFit:"contain",onError:function(){f.endFail("load-image-error")},onLoad:function(){f.endSuccess()},ref:r,src:q,width:"100%"})}):k.jsx(c("BaseImage.react"),{height:"100%",objectFit:"contain",onError:function(){f.endFail("load-image-error")},onLoad:function(){f.endSuccess()},ref:r,src:q,width:"100%"}),b[15]=e,b[16]=y,b[17]=v,b[18]=t,b[19]=f,b[20]=q,b[21]=s,b[22]=w):w=b[22];b[23]!==e?(g=k.jsx(p,{attachment:e}),b[23]=e,b[24]=g):g=b[24];b[25]!==x||b[26]!==w||b[27]!==g?(i=k.jsxs(k.Fragment,{children:[x,w,g]}),b[25]=x,b[26]=w,b[27]=g,b[28]=i):i=b[28];b[29]!==v||b[30]!==a||b[31]!==i||b[32]!==s?(t=k.jsx(c("MWV2MediaViewerAspectRatioContainer.react"),{height:v,onClickOutsideOfChildren:a,width:s,children:i}),b[29]=v,b[30]=a,b[31]=i,b[32]=s,b[33]=t):t=b[33];return t}else{f.endFail("missing-playable-url");return null}}function p(a){var b=d("react-compiler-runtime").c(3);a=a.attachment;a=a;a=a.isHd===!0;if(!a)return null;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a={className:"x78zum5 x5yr21d x10l6tqk xh8yej3"},e={className:"x92rtbv x10l6tqk xomnu4r"},b[0]=a,b[1]=e):(a=b[0],e=b[1]);b[2]===Symbol["for"]("react.memo_cache_sentinel")?(a=k.jsx("div",babelHelpers["extends"]({},a,{children:k.jsx("div",babelHelpers["extends"]({},e,{children:k.jsx(c("MWXIconStrict.react"),{color:d("MWXThreadThemeColor").mwxThreadThemeColor("rgba(255,255,255,0.7)"),icon:c("MWXIconHd"),size:24})}))})),b[2]=a):a=b[2];return a}g["default"]=a}),226);
__d("useMWMaybeInboxMediaRestoreLoop",["cr:20239","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c=d("react-compiler-runtime").c(2);a=b("cr:20239")(a);if(c[0]!==a){var e;e=(e=a)!=null?e:{onEBOnboarded:i,startMediaSync:h};c[0]=a;c[1]=e}else e=c[1];return e}function h(){}function i(){}g["default"]=a}),98);